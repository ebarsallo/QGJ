## QGJ-UI

After launching an application, users often interact with the application (or the device underneath) either via touchscreen or via hardware keys. Evaluating application robustness against such interactions would require emulating user interface (UI) events. For this purpose, we developed QGJ-UI.

QGJ is based on the Android stress testing tool [Monkey](https://developer.android.com/studio/test/monkey.html).

### Before start
 * Modify the hard-coded paths in .java with the corresponding values.

### Components 

 * `build`: Java class/binary that will generate the fuzzed events.
 * `script`: Bash scripts used for collect events, run monkey, etc.
 * `src`: Source code for the java program that generates fuzzed events from Monkey logs. Make sure to change the input file to point to the Monkey log generated before. You may also need to load this as a new project in Android Studio for easy compilation/editing.

### Operation

1. `install-packages.sh`: Run this first after starting with a clean Watch/emulator.
2. `run_monkey.sh`: Script to run monkey on the watch. Make sure to connect your Watch/emulator with a phone and check the emulator number/id before running. This will generate the log of events generated by Monkey.
3. Run `java Ape/Ape` (build directory). This will generate three files in the current directory: original events, semi-valid events, random events. Browse the file to see how they look. Essentially, Ape converts the Monkey events to adb shell commands with fuzzed parameters.
4. `master-run.sh`: master script to drive the experiments. This internally calls run_commands.sh
5. `run_commands.sh`: Actual script to read the fuzzed events/`adb` commands from the output of Ape and feed it to the watch. Internally calls `collect_logcat.sh`
6. `collect_logcat.sh`: Script to start log collection using logcat.
7. `clean.sh`: Script to clean up directory.

